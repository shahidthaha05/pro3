<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ game.title }} - Available Slots</title>
</head>
<body>

<h1>{{ game.title }} - Game Details</h1>

<!-- Date Picker to Select Date -->
<form method="GET">
    <label for="date">Select Date:</label>
    <input type="date" name="date" id="date" value="{{ selected_date }}" onchange="this.form.submit()">
</form>

<!-- Available Slots for Booking -->
<div class="slot-list">
    <h3>Available Slots for {{ selected_date }}:</h3>
    {% if available_slots %}
        <ul>
            {% for slot in available_slots %}
                <li class="slot-item">
                    <span>{{ slot.time_slot }}</span>
                    <span class="available">Available</span>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No available slots for this date.</p>
    {% endif %}
</div>

<!-- Book Slot Form -->
{% if available_slots %}
    <form method="POST" action="{% url 'view_game' game_id=game.id %}">
        {% csrf_token %}
        <label for="slot">Select a Slot:</label>
        <select name="slot_id" id="slot" required>
            {% for slot in available_slots %}
                <option value="{{ slot.id }}">{{ slot.time_slot }}</option>
            {% endfor %}
        </select>
        <input type="hidden" name="date" value="{{ selected_date }}">
        <input type="text" name="name" placeholder="Your Name" required>
        <input type="email" name="email" placeholder="Your Email" required>
        <button type="submit" class="button">Book Now</button>
    </form>
{% else %}
    <p>No available slots for this date.</p>
{% endif %}

</body>
</html>
